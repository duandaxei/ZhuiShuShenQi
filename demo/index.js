parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"Focm":[function(require,module,exports) {
var o=new Vue({el:"#app",data:{show:{index:!0,ajax:!1,searchIcon:!0,searchInput:!1,swichMybook:!0,swichFind:!0,activeMybook:!0,activeFind:!1,nobook:!0,myBookList:!1,find:!1,renderCatalog:!1,renderList:!1,renderBook:!1,BookSource:!1,firstCover:!1},ajax:{notice:"加载中...",titleText:"标题",catalogData:"",nextSortUrl:"",bookListData:"",nowAtBookId:"",nowAtBookSource:{},nowAtBookChapter:"",nowAtBookChapterText:"",bookSource:{},bookContent:{},fullScreenState:!1}},methods:{show_ajax:function(){o.show.index=!1,o.show.ajax=!0},show_ajaxrenderCatalog:function(){o.show_ajax(),o.show.renderCatalog=!0,o.show.renderList=!1,o.show.renderBook=!1},show_ajaxrenderList:function(){console.log("渲染列表"),o.show_ajax(),o.show.renderCatalog=!1,o.show.renderList=!0,o.show.renderBook=!1},show_ajaxrenderBook:function(){console.log("渲染书籍"),o.show_ajax(),o.show.renderCatalog=!1,o.show.renderList=!1,o.show.renderBook=!0},show_ajaxBookSource:function(){console.log("渲染源"),o.show.BookSource=!0},show_ajaxrenderText:function(){console.log("渲染文本"),o.show.BookSource=!1},show_index:function(){o.show.index=!0,o.show.ajax=!1},show_indexMybook:function(){o.show_index(),o.show.searchIcon=!0,o.show.searchInput=!1,o.show.swichMybook=!0,o.show.swichFind=!0,o.show.activeMybook=!0,o.show.activeFind=!1,o.show.nobook=!0,o.show.myBookList=!1,o.show.find=!1},show_indexFind:function(){o.show_index(),o.show.searchIcon=!0,o.show.searchInput=!1,o.show.swichMybook=!0,o.show.swichFind=!0,o.show.activeMybook=!1,o.show.activeFind=!0,o.show.nobook=!1,o.show.myBookList=!1,o.show.find=!0},show_searchInput:function(){var e=this;console.log("显示搜索框"),o.show.searchIcon=!1,o.show.searchInput=!0,this.$nextTick(function(){e.$refs.searchInput.focus()})},submitSearchInput:function(e){var t=this;console.log("加载搜索数据");var a=e.target.value;o.ajax.titleText="检索："+a,fetch("https://api.imhcg.cn/api/v1/zssq/search/"+a).then(function(o){return o.json()}).then(function(e){t.ajax.bookListData=e,o.show_ajaxrenderList()})},renderCatalog:function(e){var t=this;console.log("加载标签");var a=e.target.getAttribute("data-func"),n=e.target.innerHTML;console.log(a),o.ajax.titleText=n;var r="";r="rank"===a?"https://api.imhcg.cn/api/v1/zssq/ranking/gender":"https://api.imhcg.cn/api/v1/zssq/catalog",fetch(r).then(function(o){return o.json()}).then(function(e){t.ajax.catalogData=e,o.show_ajaxrenderCatalog()})},renderBookList:function(e){var t=this;console.log("加载书籍列表");var a=e.target.getAttribute("type"),n=e.target.innerHTML;o.ajax.titleText=n,console.log(a,n);var r="";if("rank"===a)r="https://api.imhcg.cn/api/v1/zssq/ranking/"+e.target.getAttribute("data-id");else{var s=e.target.getAttribute("gender"),c=e.target.getAttribute("data-Major"),i=e.target.getAttribute("data-Minor");i||(i="");var h=0;r="https://api.imhcg.cn/api/v1/zssq/catalog/detail?gender="+s+"&major="+c+"&minor="+i+"&start="+h+"&limit=20",h+=20,o.ajax.nextSortUrl="https://api.imhcg.cn/api/v1/zssq/catalog/detail?gender="+s+"&major="+c+"&minor="+i+"&start="+h+"&limit=20"}fetch(r).then(function(o){return o.json()}).then(function(e){t.ajax.bookListData=e,o.show_ajaxrenderList()})},loadBook:function(e){var t=this;console.log("加载书籍");var a=e.target.getAttribute("bookID");o.ajax.nowAtBookId=a;var n=e.target.innerHTML;o.ajax.titleText=n;var r="https://api.imhcg.cn/api/v1/zssq/atoc/"+a;this.ajax.bookSource[a]?(console.log("加载源"),o.show_ajaxrenderBook(),o.show_ajaxrenderText()):(console.log("刷新源"),fetch(r).then(function(o){return o.json()}).then(function(o){t.ajax.bookSource[a]=o}).then(function(){o.show_ajaxrenderBook(),o.show_ajaxBookSource()}))},loadCatalog:function(e){console.log("加载目录"),o.ajax.notice="正在加载目录...";var t=e.target.getAttribute("sourceID");o.ajax.nowAtBookSource[o.ajax.nowAtBookId]=t,console.log(t),o.show.firstCover=!0,fetch("https://api.imhcg.cn/api/v1/zssq/btoc/"+t).then(function(o){return o.json()}).then(function(e){o.ajax.bookContent[t]=e,console.log("目录下载完成"),o.ajax.nowAtBookChapter=0;var a=o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]].chapters[o.ajax.nowAtBookChapter].link;o.loadChapterText(a)})},loadChapterText:function(e){var t=this,a="https://api.imhcg.cn/api/v1/zssq/chapter?link="+encodeURI(e);fetch(a).then(function(o){return o.json()}).then(function(e){o.ajax.nowAtBookChapterText=e,console.log("章节下载完成"),console.log(o.ajax.nowAtBookChapterText),!1===e.ok?(o.show.firstCover=!1,console.log("请求失败"),delete o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]],delete o.ajax.bookSource[o.ajax.nowAtBookId],alert("请求章节失败，请换源再试"),o.show_indexFind()):(console.log("请求成功"),o.ajax.titleText=e.chapter.title,o.show_ajaxrenderText(),t.$nextTick(function(){console.log(t.$refs.readArea),t.$refs.readArea.scrollTop=0}),o.show.firstCover=!1)})},BookControl:function(e){console.log("加载阅读器功能条");var t=e.target.getAttribute("func");if(console.log(t),"Bnext"===t&&o.ajax.nowAtBookChapter<o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]].chapters.length){o.ajax.nowAtBookChapter+=1;var a=o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]].chapters[o.ajax.nowAtBookChapter].link;o.loadChapterText(a)}if("Bbefore"===t&&o.ajax.nowAtBookChapter>0){o.ajax.nowAtBookChapter-=1;var n=o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]].chapters[o.ajax.nowAtBookChapter].link;o.loadChapterText(n)}if("Bfull"===t)if(console.log("全屏"),o.ajax.fullScreenState=!o.ajax.fullScreenState,o.ajax.fullScreenState){console.log("启动全屏"),document.querySelector("#header").setAttribute("class","ajaxHeader");var r=document.querySelector("#ajax");r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullScreen()}else console.log("退出全屏"),document.querySelector("#header").removeAttribute("class"),document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},fullScreen:function(){console.log("全屏")}}});
},{}]},{},["Focm"], null)
//# sourceMappingURL=/index.map