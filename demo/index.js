parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"Focm":[function(require,module,exports) {
var o=new Vue({el:"#app",data:{show:{index:!0,ajax:!1,searchIcon:!0,searchInput:!1,swichMybook:!0,swichFind:!0,activeMybook:!0,activeFind:!1,nobook:!0,myBookList:!1,find:!1,renderCatalog:!1,renderList:!1,renderBook:!1,BookSource:!1,firstCover:!1},ajax:{notice:"加载中...",titleText:"标题",catalogData:"",nextSortUrl:"",bookListData:"",nowAtBookId:"",nowAtBookSource:{},nowAtBookChapter:"",nowAtBookChapterText:"",bookSource:{},bookContent:{}}},methods:{show_ajax:function(){o.show.index=!1,o.show.ajax=!0},show_ajaxrenderCatalog:function(){o.show_ajax(),o.show.renderCatalog=!0,o.show.renderList=!1,o.show.renderBook=!1},show_ajaxrenderList:function(){console.log("渲染列表"),o.show_ajax(),o.show.renderCatalog=!1,o.show.renderList=!0,o.show.renderBook=!1},show_ajaxrenderBook:function(){console.log("渲染书籍"),o.show_ajax(),o.show.renderCatalog=!1,o.show.renderList=!1,o.show.renderBook=!0},show_ajaxBookSource:function(){console.log("渲染源"),o.show.BookSource=!0},show_ajaxrenderText:function(){console.log("渲染文本"),o.show.BookSource=!1},show_index:function(){o.show.index=!0,o.show.ajax=!1},show_indexMybook:function(){o.show_index(),o.show.searchIcon=!0,o.show.searchInput=!1,o.show.swichMybook=!0,o.show.swichFind=!0,o.show.activeMybook=!0,o.show.activeFind=!1,o.show.nobook=!0,o.show.myBookList=!1,o.show.find=!1},show_indexFind:function(){o.show_index(),o.show.searchIcon=!0,o.show.searchInput=!1,o.show.swichMybook=!0,o.show.swichFind=!0,o.show.activeMybook=!1,o.show.activeFind=!0,o.show.nobook=!1,o.show.myBookList=!1,o.show.find=!0},show_searchInput:function(){var t=this;console.log("显示搜索框"),o.show.searchIcon=!1,o.show.searchInput=!0,this.$nextTick(function(){t.$refs.searchInput.focus()})},submitSearchInput:function(t){var a=this;console.log("加载搜索数据");var e=t.target.value;o.ajax.titleText="检索："+e,fetch("https://api.imhcg.cn/api/v1/zssq/search/"+e).then(function(o){return o.json()}).then(function(t){a.ajax.bookListData=t,o.show_ajaxrenderList()})},renderCatalog:function(t){var a=this;console.log("加载标签");var e=t.target.getAttribute("data-func"),n=t.target.innerHTML;console.log(e),o.ajax.titleText=n;var r="";r="rank"===e?"https://api.imhcg.cn/api/v1/zssq/ranking/gender":"https://api.imhcg.cn/api/v1/zssq/catalog",fetch(r).then(function(o){return o.json()}).then(function(t){a.ajax.catalogData=t,o.show_ajaxrenderCatalog()})},renderBookList:function(t){var a=this;console.log("加载书籍列表");var e=t.target.getAttribute("type"),n=t.target.innerHTML;o.ajax.titleText=n,console.log(e,n);var r="";if("rank"===e)r="https://api.imhcg.cn/api/v1/zssq/ranking/"+t.target.getAttribute("data-id");else{var s=t.target.getAttribute("gender"),i=t.target.getAttribute("data-Major"),h=t.target.getAttribute("data-Minor");h||(h="");var c=0;r="https://api.imhcg.cn/api/v1/zssq/catalog/detail?gender="+s+"&major="+i+"&minor="+h+"&start="+c+"&limit=20",c+=20,o.ajax.nextSortUrl="https://api.imhcg.cn/api/v1/zssq/catalog/detail?gender="+s+"&major="+i+"&minor="+h+"&start="+c+"&limit=20"}fetch(r).then(function(o){return o.json()}).then(function(t){a.ajax.bookListData=t,o.show_ajaxrenderList()})},loadBook:function(t){var a=this;console.log("加载书籍");var e=t.target.getAttribute("bookID");o.ajax.nowAtBookId=e;var n=t.target.innerHTML;o.ajax.titleText=n;var r="https://api.imhcg.cn/api/v1/zssq/atoc/"+e;this.ajax.bookSource[e]?(console.log("加载源"),o.show_ajaxrenderBook(),o.show_ajaxrenderText()):(console.log("刷新源"),fetch(r).then(function(o){return o.json()}).then(function(o){a.ajax.bookSource[e]=o}).then(function(){o.show_ajaxrenderBook(),o.show_ajaxBookSource()}))},loadCatalog:function(t){console.log("加载目录"),o.ajax.notice="正在加载目录...";var a=t.target.getAttribute("sourceID");o.ajax.nowAtBookSource[o.ajax.nowAtBookId]=a,console.log(a),o.show.firstCover=!0,fetch("https://api.imhcg.cn/api/v1/zssq/btoc/"+a).then(function(o){return o.json()}).then(function(t){o.ajax.bookContent[a]=t,console.log("目录下载完成"),o.ajax.nowAtBookChapter=0;var e=o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]].chapters[o.ajax.nowAtBookChapter].link;o.loadChapterText(e)})},loadChapterText:function(t){var a=this,e="https://api.imhcg.cn/api/v1/zssq/chapter?link="+encodeURI(t);fetch(e).then(function(o){return o.json()}).then(function(t){o.ajax.nowAtBookChapterText=t,console.log("章节下载完成"),console.log(o.ajax.nowAtBookChapterText),!1===t.ok?(o.show.firstCover=!1,console.log("请求失败"),delete o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]],delete o.ajax.bookSource[o.ajax.nowAtBookId],alert("请求章节失败，请换源再试"),o.show_indexFind()):(console.log("请求成功"),o.ajax.titleText=t.chapter.title,o.show_ajaxrenderText(),a.$nextTick(function(){console.log(a.$refs.readArea),a.$refs.readArea.scrollTop=0}),o.show.firstCover=!1)})},BookControl:function(t){console.log("加载阅读器功能条");var a=t.target.getAttribute("func");if(console.log(a),"Bnext"===a&&o.ajax.nowAtBookChapter<o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]].chapters.length){o.ajax.nowAtBookChapter+=1;var e=o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]].chapters[o.ajax.nowAtBookChapter].link;o.loadChapterText(e)}if("Bbefore"===a&&o.ajax.nowAtBookChapter>0){o.ajax.nowAtBookChapter-=1;var n=o.ajax.bookContent[o.ajax.nowAtBookSource[o.ajax.nowAtBookId]].chapters[o.ajax.nowAtBookChapter].link;o.loadChapterText(n)}}}});
},{}]},{},["Focm"], null)
//# sourceMappingURL=/index.map