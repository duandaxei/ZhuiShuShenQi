{"version":3,"sources":["main.js"],"names":["M","window","onpopstate","e","console","log","sava","history","pushState","document","querySelector","innerHTML","title","location","href","f","callItem","ul","i","_id","author","shorIntro","shortIntro","retentionRatio","latelyFollower","shortBookItem","createElement","setAttribute","generalSpan","text","classname","element","appendChild","createTextNode","shortBookItemTitle","shortBookItemAuthor","shortBookItemShortIntro","shortBookItemretentionRatio","shortBookItemlatelyFollower","fillRender","elements","render","forEach","style","display","search","listen","searchInput","headerFunxSearchIcon","addEventListener","target","focus","onblur","onkeydown","event","shiftLabel","value","length","keyCode","url","fetch","then","r","json","d","books","mybook","show","isFunc","getAttribute","isActive","swichSymble","parentNode","removeChild","removeAttribute","choose","ajaxRank","ajaxBooklist","ajaxSort","ajaxRandom","rankid","major","minor","gender","ranking","ren","loadMore","start","more","creatTag","insertBefore","Number","tag","ulMale","male","fillRank","ulMalenote","ulFemale","female","ulFemalenote","rankItem","rankItemTitle","shortTitle","uMale","mins","fillSort","uFemale","uPress","press"],"mappings":"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","file":"main.45220bee.map","sourceRoot":"..","sourcesContent":["var M = {};\r\n// 前进或后退\r\nwindow.onpopstate = function (e) {\r\n    console.log('前进或后退')\r\n}\r\n// 保存历史纪录\r\nfunction sava() {\r\n    window.history.pushState({ 'main': document.querySelector('#main').innerHTML }, document.title, location.href);\r\n}\r\n// 功能\r\nM.f = {};\r\n// 传入一个无序列表元素和一个书籍信息，书籍信息会被添加到无序列表\r\nM.f.callItem = function (ul, i) {\r\n    // 取出书籍信息\r\n    let _id = i._id;\r\n    let author = i.author;\r\n    let title = i.title;\r\n    let shorIntro = i.shortIntro;\r\n    let retentionRatio = i.retentionRatio;\r\n    let latelyFollower = i.latelyFollower;\r\n    // 创建信息容器\r\n    let shortBookItem = document.createElement('li');\r\n    shortBookItem.setAttribute('class', 'shortBookItem');\r\n    \r\n\r\n\r\n    // 创建信息填充函数 \r\n    function generalSpan(text, classname) {\r\n        let element = document.createElement('span');\r\n        element.appendChild(document.createTextNode(text));\r\n        element.setAttribute('class', classname);\r\n        return element\r\n    }\r\n    // 创建信息标签\r\n    let shortBookItemTitle = generalSpan(title, 'shortBookItemTitle');\r\n    shortBookItemTitle.setAttribute('_id', _id);\r\n    let shortBookItemAuthor = generalSpan(author, 'shortBookItemAuthor');\r\n    let shortBookItemShortIntro = generalSpan(shorIntro, 'shortBookItemShortIntro');\r\n    let shortBookItemretentionRatio = generalSpan('留存率 ' + retentionRatio, 'shortBookItemretentionRatio');\r\n    let shortBookItemlatelyFollower = generalSpan('追书人数 ' + latelyFollower, 'shortBookItemlatelyFollower');\r\n    // 填充信息\r\n    shortBookItem.appendChild(shortBookItemTitle);\r\n    shortBookItem.appendChild(shortBookItemAuthor);\r\n    shortBookItem.appendChild(shortBookItemShortIntro);\r\n    shortBookItem.appendChild(shortBookItemretentionRatio);\r\n    shortBookItem.appendChild(shortBookItemlatelyFollower);\r\n    // 添加到父元素\r\n    ul.appendChild(shortBookItem);\r\n}\r\n// 初始化渲染区域，将传入的元素填充并设为可见\r\nM.f.fillRender = function (elements) {\r\n    // 取得渲染容器\r\n    let render = document.querySelector('#render');\r\n    render.innerHTML = '';\r\n    elements.forEach(e => {\r\n        render.appendChild(e);\r\n    })\r\n    render.style.display = 'block';\r\n    document.querySelector('#findList').style.display = 'none';\r\n}\r\n\r\n// DOM\r\n// mybook\r\nM.search = {};\r\nM.search.listen = function () {\r\n    let searchInput = document.querySelector('#searchInput');\r\n    // 取得搜索图标按钮\r\n    let headerFunxSearchIcon = document.querySelector('#headerFunxSearchIcon');\r\n    // 为搜索图标按钮添加点击事件监听\r\n    headerFunxSearchIcon.addEventListener('click', e => {\r\n        // 隐藏图标，显示输入框\r\n        e.target.style.display = 'none';\r\n        searchInput.style.display = 'block';\r\n        searchInput.focus();\r\n        // 为输入框添加失去焦点事件监听\r\n        searchInput.onblur = function () {\r\n            // 隐藏输入框，显示图标\r\n            this.style.display = 'none';\r\n            e.target.style.display = 'block';\r\n        }\r\n        // 添加回车监听，然后请求API并渲染 BODY\r\n        searchInput.onkeydown = function (event) {\r\n            // 切换到发现页\r\n            shiftLabel(document.querySelector('li[data-swich=\"find\"]'));\r\n            console.log('切换')\r\n            // 判断输入长度及回车\r\n            if (this.value.length > 1 && event.keyCode === 13) {\r\n                console.log('回车')\r\n                let url = 'https://api.imhcg.cn/api/v1/zssq/search/' + this.value;\r\n                // 隐藏发现列表\r\n                document.querySelector('#findList').style.display = 'none';\r\n                fetch(url)\r\n                    .then(r => r.json())\r\n                    .then(d => {\r\n                        let ul = document.createElement('ul');\r\n                        ul.setAttribute('class', 'shortBook');\r\n                        d.books.forEach(i => {\r\n                            M.f.callItem(ul, i);\r\n                        })\r\n                        M.f.fillRender([ul,])\r\n                    })\r\n            }\r\n        }\r\n    })\r\n}\r\n// 添加搜索框监听\r\nM.search.listen()\r\n\r\n// 我的书籍\r\nM.mybook = {};\r\nM.mybook.show = function () {\r\n\r\n}\r\n\r\n\r\n// 切换\r\n// 取得切换选选项\r\ndocument.querySelector('#swich').addEventListener('click', e => {\r\n    let target = e.target;\r\n    let isFunc = target.getAttribute('data-type');\r\n    if (isFunc && isFunc === 'swich') {\r\n        // 检查切换目标是否活跃目标\r\n        let isActive = target.querySelector('#swichSymble');\r\n        if (isActive) {\r\n            shiftLabel(target);\r\n        } else {\r\n            shiftLabel(target);\r\n        }\r\n    }\r\n})\r\n\r\n// 添加按钮监听\r\ndocument.querySelector('#bodyNoBookIcon').addEventListener('click', () => {\r\n    shiftLabel(document.querySelector('li[data-swich=\"find\"]'));\r\n})\r\n\r\nfunction shiftLabel(target) {\r\n    // 移除前一活跃标记\r\n    let swichSymble = document.querySelector('#swichSymble');\r\n    swichSymble.parentNode.removeChild(swichSymble);\r\n    // 移除前一活跃ID\r\n    document.querySelector('#activeSwich').removeAttribute('id');\r\n    // 重建活跃标记\r\n    swichSymble = document.createElement('div');\r\n    swichSymble.setAttribute('id', 'swichSymble')\r\n    // 恢复活跃标记\r\n    target.appendChild(swichSymble);\r\n    // 恢复活跃ID\r\n    target.setAttribute('id', 'activeSwich');\r\n    // 载入选择，加载内容区\r\n    let choose = target.getAttribute('data-swich');\r\n\r\n    if (choose === 'find') {\r\n        document.querySelector('#find').style.display = 'block';\r\n        document.querySelector('#myBook').style.display = 'none';\r\n        document.querySelector('#findList').style.display = 'flex';\r\n        document.querySelector('#render').style.display = 'none';\r\n        document.querySelector('#render').innerHTML = '';\r\n    } else {\r\n        document.querySelector('#find').style.display = 'none';\r\n        document.querySelector('#myBook').style.display = 'block';\r\n    }\r\n}\r\n\r\n\r\n\r\n// 发现页监听\r\n// 取得切换选选项\r\ndocument.querySelector('#findList').addEventListener('click', e => {\r\n    let target = e.target;\r\n    let isFunc = target.getAttribute('data-func');\r\n    if (isFunc) {\r\n        switch (isFunc) {\r\n            case 'rank':\r\n                console.log('排行榜')\r\n                ajaxRank();\r\n                break;\r\n            case 'booklist':\r\n                console.log('书单')\r\n                ajaxBooklist();\r\n                break;\r\n            case 'sort':\r\n                console.log('分类')\r\n                ajaxSort();\r\n                break;\r\n            case 'random':\r\n                console.log('随机')\r\n                ajaxRandom();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n})\r\n\r\n// 监听排行榜\r\ndocument.querySelector('#render').addEventListener('click', e => {\r\n    let target = e.target;\r\n    const rankid = target.getAttribute('rankid');\r\n    const major = target.getAttribute('major');\r\n    const minor = target.getAttribute('minor');\r\n    const gender = target.getAttribute('gender');\r\n    const _id = target.getAttribute('_id');\r\n    // 响应排行的点击\r\n    if (rankid) {\r\n        let url = 'https://api.imhcg.cn/api/v1/zssq/ranking/' + rankid;\r\n        fetch(url)\r\n            .then(r => r.json())\r\n            .then(d => {\r\n                let ul = document.createElement('ul');\r\n                ul.setAttribute('class', 'shortBook');\r\n                d.ranking.books.forEach(i => {\r\n                    M.f.callItem(ul, i);\r\n                })\r\n                M.f.fillRender([ul,])\r\n            })\r\n    }\r\n    // 响应分类的点击\r\n    if (major) {\r\n        let ren = document.querySelector('#render');\r\n        ren.innerHTML = '';\r\n        loadMore(0);\r\n    }\r\n    if (_id){\r\n        console.log(_id)\r\n    }\r\n    function loadMore(start) {\r\n        let url = '';\r\n        start = start;\r\n        if (minor) {\r\n            url = 'https://api.imhcg.cn/api/v1/zssq/catalog/detail?major=' + major + '&minor=' + minor + '&gender=' + gender + '&start=' + start + '&limit=' + '20';\r\n        } else {\r\n            url = 'https://api.imhcg.cn/api/v1/zssq/catalog/detail?major=' + major + '&gender=' + gender + '&start=' + start + '&limit=' + '20';\r\n        }\r\n        console.log(url)\r\n        fetch(url)\r\n            .then(r => r.json())\r\n            .then(d => {\r\n                let ul = document.createElement('ul');\r\n                ul.setAttribute('class', 'shortBook');\r\n                d.books.forEach(i => {\r\n                    M.f.callItem(ul, i);\r\n                })\r\n    \r\n                start += 20;\r\n                let ren = document.querySelector('#render');\r\n                let more = M.f.creatTag('p', 'renderMore', '下一页');\r\n                more.setAttribute('start', start);\r\n                ren.appendChild(more);\r\n                // 在下一页按钮前插入\r\n                ren.insertBefore(ul,more);\r\n                more.addEventListener('click', e => {\r\n                    ren.removeChild(more);\r\n                    loadMore(Number(e.target.getAttribute('start')));\r\n                })\r\n            })\r\n\r\n    }\r\n})\r\n\r\nM.f.creatTag = function (tag, classname, text) {\r\n    let element = document.createElement(tag);\r\n    element.setAttribute('class', classname);\r\n    element.appendChild(document.createTextNode(text));\r\n    render.appendChild(element);\r\n    return element\r\n}\r\n\r\n// Ajax\r\n// https://api.imhcg.cn/api/v1/zssq\r\nfunction ajaxRank() {\r\n    fetch('https://api.imhcg.cn/api/v1/zssq/ranking/gender')\r\n        .then(r => r.json())\r\n        .then(d => {\r\n            // 隐藏发现列表\r\n            document.querySelector('#findList').style.display = 'none';\r\n            // 初始化渲染区域\r\n            let render = document.querySelector('#render');\r\n            render.style.display = 'block';\r\n            // 男生\r\n            let ulMale = document.createElement('ul');\r\n            ulMale.setAttribute('class', 'rankUl');\r\n            d.male.forEach(i => {\r\n                fillRank(ulMale, i)\r\n            });\r\n            let ulMalenote = M.f.creatTag('p', 'rankUlTitle', '男生');\r\n            render.appendChild(ulMalenote);\r\n            render.appendChild(ulMale);\r\n\r\n            // 女生\r\n            let ulFemale = document.createElement('ul');\r\n            ulFemale.setAttribute('class', 'rankUl');\r\n            d.female.forEach(i => {\r\n                fillRank(ulFemale, i)\r\n            });\r\n            let ulFemalenote = M.f.creatTag('p', 'rankUlTitle', '女生');\r\n            render.appendChild(ulFemalenote);\r\n            render.appendChild(ulFemale);\r\n\r\n            function fillRank(ul, i) {\r\n                let rankItem = document.createElement('li');\r\n                rankItem.setAttribute('class', 'rankItem');\r\n                let rankItemTitle = document.createElement('span');\r\n                rankItemTitle.setAttribute('class', 'rankItemTitle');\r\n                rankItemTitle.appendChild(document.createTextNode(i.shortTitle));\r\n                rankItem.appendChild(rankItemTitle);\r\n                rankItemTitle.setAttribute('rankID', i._id);\r\n                ul.appendChild(rankItem);\r\n            }\r\n        })\r\n}\r\n\r\nfunction ajaxBooklist() {\r\n\r\n}\r\n\r\nfunction ajaxSort() {\r\n    fetch('https://api.imhcg.cn/api/v1/zssq/catalog')\r\n        .then(r => r.json())\r\n        .then(d => {\r\n            // 男生\r\n            let uMale = document.createElement('ul');\r\n            uMale.setAttribute('class', 'rankUl');\r\n            d.male.forEach(i => {\r\n                let major = i.major;\r\n                i.mins.forEach(minor => {\r\n                    fillSort(uMale, major, minor, 'male')\r\n                })\r\n            })\r\n            // 女生\r\n            let uFemale = document.createElement('ul');\r\n            uFemale.setAttribute('class', 'rankUl');\r\n            d.female.forEach(i => {\r\n                let major = i.major;\r\n                i.mins.forEach(minor => {\r\n                    fillSort(uFemale, major, minor, 'female')\r\n                })\r\n            })\r\n            // 出版\r\n            let uPress = document.createElement('ul');\r\n            uPress.setAttribute('class', 'rankUl', null);\r\n            d.press.forEach(i => {\r\n                let major = i.major;\r\n                fillSort(uPress, major, null)\r\n            })\r\n\r\n            function fillSort(ul, major, minor, gender) {\r\n                let rankItem = document.createElement('li');\r\n                rankItem.setAttribute('class', 'rankItem');\r\n                let rankItemTitle = document.createElement('span');\r\n                rankItemTitle.setAttribute('class', 'rankItemTitle');\r\n                if (!minor) {\r\n                    rankItemTitle.appendChild(document.createTextNode(major));\r\n                    rankItemTitle.setAttribute('major', major);\r\n                } else {\r\n                    rankItemTitle.appendChild(document.createTextNode(minor));\r\n                    rankItemTitle.setAttribute('major', major);\r\n                    rankItemTitle.setAttribute('minor', minor);\r\n                    rankItemTitle.setAttribute('gender', gender);\r\n                }\r\n                rankItem.appendChild(rankItemTitle);\r\n                ul.appendChild(rankItem);\r\n            }\r\n            M.f.fillRender([M.f.creatTag('p', 'rankUlTitle', '男生'), uMale, M.f.creatTag('p', 'rankUlTitle', '女生'), uFemale, M.f.creatTag('p', 'rankUlTitle', '出版物'), uPress])\r\n        })\r\n}\r\n\r\n\r\n\r\n\r\n"]}